{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '44984480-6400f6ac5e39d78263c6545e0';\nconst URL = 'https://pixabay.com/api/';\n\nfunction fetchImages(query) {\n  const encodedQuery = encodeURIComponent(query);\n  const fullUrl = `${URL}?key=${API_KEY}&q=${encodedQuery}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  return fetch(fullUrl).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n\nexport { fetchImages };\n","function showImgResult(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-list\">\n          <a class=\"gallery-large\" href=\"${largeImageURL}\">\n            <img class=\"gallery-web\" src=\"${webformatURL}\" alt=\"${tags}\" height=\"152\" width=\"360\"/>\n            <ul class=\"comments-strage\">\n              <li class=\"comments-strage-list\">\n                <span class=\"windows\">Likes </span>${likes}\n              </li>\n              <li class=\"comments-strage-list\">\n                <span class=\"windows\">Views </span>${views}\n              </li>\n              <li class=\"comments-strage-list\">\n                <span class=\"windows\">Comments </span>${comments}\n              </li>\n              <li class=\"comments-strage-list\">\n                <span class=\"windows\">Downloads </span>${downloads}\n              </li>\n            </ul>\n          </a>\n        </li>\n      `\n    )\n    .join('');\n}\n\nexport { showImgResult };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { showImgResult } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nconst pictGallery = new simpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst clearSearchValue = evt => {\n  evt.target.elements.search.value = '';\n};\n\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  loader.style.display = 'block';\n  const query = evt.target.elements.search.value.trim();\n  if (query.length <= 0) {\n    loader.style.display = 'none';\n    gallery.innerHTML = '';\n    clearSearchValue(evt);\n    return iziToast.error({\n      title: 'Error',\n      message: 'Search value is empty',\n      position: 'topRight',\n    });\n  }\n\n  fetchImages(query)\n    .then(data => {\n      loader.style.display = 'none';\n      if (data.hits.length === 0) {\n        evt.target.elements.search.value = '';\n        throw new Error('No images found');\n      }\n      const markup = showImgResult(data.hits);\n      gallery.innerHTML = markup;\n      clearSearchValue(evt);\n      pictGallery.refresh();\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      console.error(error);\n      iziToast.error({\n        title: 'Error',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        position: 'topRight',\n      });\n      clearSearchValue(evt);\n      gallery.innerHTML = '';\n    });\n});\n"],"names":["API_KEY","URL","fetchImages","query","encodedQuery","fullUrl","res","showImgResult","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","pictGallery","simpleLightbox","clearSearchValue","evt","iziToast","data","markup","error"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAM,2BAEZ,SAASC,EAAYC,EAAO,CAC1B,MAAMC,EAAe,mBAAmBD,CAAK,EACvCE,EAAU,GAAGJ,CAAG,QAAQD,CAAO,MAAMI,CAAY,2DAEvD,OAAO,MAAMC,CAAO,EAAE,KAAKC,GAAO,CAChC,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CCbA,SAASC,EAAcC,EAAK,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,2CAE+BL,CAAa;AAAA,4CACZD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,qDAGjBC,CAAK;AAAA;AAAA;AAAA,qDAGLC,CAAK;AAAA;AAAA;AAAA,wDAGFC,CAAQ;AAAA;AAAA;AAAA,yDAGPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,OAM7D,EACA,KAAK,EAAE,CACZ,CC3BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EACpC,SAAS,cAAc,eAAe,EACpD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAc,IAAIC,EAAe,aAAc,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAmBC,GAAO,CAC9BA,EAAI,OAAO,SAAS,OAAO,MAAQ,EACrC,EAEAN,EAAK,iBAAiB,SAAUM,GAAO,CACrCA,EAAI,eAAc,EAClBJ,EAAO,MAAM,QAAU,QACvB,MAAMf,EAAQmB,EAAI,OAAO,SAAS,OAAO,MAAM,OAC/C,GAAInB,EAAM,QAAU,EAClB,OAAAe,EAAO,MAAM,QAAU,OACvBD,EAAQ,UAAY,GACpBI,EAAiBC,CAAG,EACbC,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,wBACT,SAAU,UAChB,CAAK,EAGHrB,EAAYC,CAAK,EACd,KAAKqB,GAAQ,CAEZ,GADAN,EAAO,MAAM,QAAU,OACnBM,EAAK,KAAK,SAAW,EACvB,MAAAF,EAAI,OAAO,SAAS,OAAO,MAAQ,GAC7B,IAAI,MAAM,iBAAiB,EAEnC,MAAMG,EAASlB,EAAciB,EAAK,IAAI,EACtCP,EAAQ,UAAYQ,EACpBJ,EAAiBC,CAAG,EACpBH,EAAY,QAAO,CACzB,CAAK,EACA,MAAMO,GAAS,CACdR,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAMQ,CAAK,EACnBH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,UAClB,CAAO,EACDF,EAAiBC,CAAG,EACpBL,EAAQ,UAAY,EAC1B,CAAK,CACL,CAAC"}